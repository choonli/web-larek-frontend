# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS.
Для сборки используется Webpack.

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание данных
Данные товара
`interface IProduct {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number;
}`

Данные состояния приложения
`interface IAppState {
    catalog: IProduct[];
    basket: string[];
    preview: string | null;
    order: IOrder | null;
    loading: boolean;
}`

Данные формы заказа
`interface IOrderForm {
    payment: string;
    adress: string;
}`

Данные контактной формы
`interface IContactForm {
    phone: string;
    email: string;
}`

Данные товаров в заказе
`interface IOrder extends IOrderForm {
    items: string[];
}`

Данные об ошибках в формах
`type FormErrors = Partial<Record<keyof IOrder, string>>;`

Данные итогового заказа
`interface IOrderResult {
    id: string;
}`

Данные карточки товара
`interface ICards extends IProduct {
    index?: string;
    buttonTitle?: string;
}`

Данные корзины
`interface IBasketView {
    items: HTMLElement[];
    total: number;
}`

Данные главной страницы
`interface IPage {
    counter: number;
    gallery: HTMLElement[];
}`

Данные событий
`interface IActions {
    onClick: (event: MouseEvent) => void;
}`

## Описание базовых классов
### 1. Базовый класс `Api`
Класс Api отвечает за работу запросов к серверу. Его функции: получение и отправление данных на сервер.
Конструктор принимает такие аргументы: 
- baseUrl: string // базовая ссылка
- options: RequestInit = {} // настройки запроса
Класс имеет следудующие методы:
- handleResponse() // проверяет ответ от сервера
- get() // реализует метод 'GET'
- post() // реализует метод 'POST'

### 2. Базовый класс `Component<T>`
Данный класс является абстрактным классом компонента. Конструктор принимает контейнер HTMLElement, где будет находиться компонент.
Класс обладает следующими методами:
- toggleClass() // переключает классы
- setText() //  устанавливает текстовое содержимое для элемента
- setDisabled() // меняет статус элемента на активный/неактивный
- setHidden() // скрывает элемент
- setVisible() // делает элемент видимым
- setImage() // устанавливает изображение с атрибутом alt
- render() // возвращает DOM-элемент

### 3. Базовый класс `EventEmitter`
Данный класс позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Имеет следующие методы:
- on () // подписывает на событие
- off() // отписывает на событие
- emit() // уведомляет о событии
- onAll() // подписывает на все события
- ofAll() // отписывает от всех событий
- trigger() // генерирует заданное событие с заданными аргументами
 
### 4. Базовый класс `Model<T>`
Данный класс является абстрактным и представляет собой базовую модель. Конструктор принимает следующие аргументы:
- data: Partial<T> // частичные данные
- events: IEvents // события
Содержит метод emitChanges(), который оповещает о том, что модель изменилась.

## Классы модели данных
### 1. Класс `Product`
Данный класс представляет собой модель продукта, наследует функциональность от класса Model.
Имеет следующие свойства:
- id: string; // ID товара
- description: string; // описание товара
- image: string; // картинка товара
- title: string; // название товара
- category: string; // категория товара
- price: number; // цена товара

### 2. Класс `AppState`



## Классы компенентов представления
### 1. Класс `Modal`
Класс Modal обеспечивает работу модального окна. Его функции: открытие и закрытие модального окна с подробной  информацией.
Конструктор принимает следующие аргументы:
- modalSelector // селектор модального окна
Включает в себя методы:
- open() // открывает модальное окно и добавляет слушатель события на закрытие по клавише Esc
- close() // закрывает модальное окно и снимает слушатель события на закрытие по клавише Esc
- _closeByEscape() // реализует функционал закрытия по клавише Esc
- _closeByClick() // реализует функционал закрытия по клику на крестик или за пределами модального окна
- setEventListeners() // добавляет слушатель события на закрытие по клику

### 2. Класс `Form<T>`
Данный класс наследует класс Component. Конструктор принимает HTMl-элемент контейнера и события в качестве параметров, а также выполняет инициализацию _submit и _errors. Устанавливает обработчики события на ввод данных и отправку формы. Свойство valid устаналивает отключенное состояние для кнопки отправки формы. Свойство errors устанавливает текст ошибки.
Содержит следующие методы: 
- onInputChange() // следит за изменениями формы
- render() // отрисовывает форму

### 3. Класс `Basket`
Данный класс наследует Component. Конструктор принимает HTML-элемент и события. В нем инициализируется список товаров, итоговая сумма и кнопка. Также содержит функцию, которая добавляет обработчик событий на кнопку и возвращает массив товаров.
Класс имеет следующие свойства:
- items - устанавливает текст для пустой корзины или вставляет товары.
- total - устаналивает текст с итоговой суммой.

### 4. Класс `Success`
Класс является наследником Component. В конструкторе принимается HTML-контейнер и действия как аргументы. Выполняется инициализация _close и _description. Свойство description предоставляет доступ к содержимому элемента.

### 5. Класс `OrderForm`


### 6. Класс `ShopApi`


### 7. Класс `Card`


### 8. Класс `Page`


### 9. Класс `BasketForm`


